{"version":3,"file":"react.cjs.development.js","sources":["../src/stencil/react-component-lib/utils/attachEventProps.ts","../src/stencil/react-component-lib/utils/index.tsx","../src/stencil/react-component-lib/createComponent.tsx","../src/stencil/components.ts","../src/components/Box.tsx"],"sourcesContent":["export function attachEventProps(node: HTMLElement, newProps: any, oldProps: any = {}) {\n  const className = getClassName(node.classList, newProps, oldProps);\n  if (className) {\n    node.className = className;\n  }\n\n  Object.keys(newProps).forEach(name => {\n    if (name === 'children' || name === 'style' || name === 'ref' || name === 'className') {\n      return;\n    }\n    if (name.indexOf('on') === 0 && name[2] === name[2].toUpperCase()) {\n      const eventName = name.substring(2);\n      const eventNameLc = eventName[0].toLowerCase() + eventName.substring(1);\n\n      if (!isCoveredByReact(eventNameLc)) {\n        syncEvent(node, eventNameLc, newProps[name]);\n      }\n    } else {\n      (node as any)[name] = newProps[name];\n    }\n  });\n}\n\nexport function getClassName(classList: DOMTokenList, newProps: any, oldProps: any) {\n  // map the classes to Maps for performance\n  const currentClasses = arrayToMap(classList);\n  const incomingPropClasses = arrayToMap(newProps.className ? newProps.className.split(' ') : []);\n  const oldPropClasses = arrayToMap(oldProps.className ? oldProps.className.split(' ') : []);\n  const finalClassNames: string[] = [];\n  // loop through each of the current classes on the component\n  // to see if it should be a part of the classNames added\n  currentClasses.forEach(currentClass => {\n    if (incomingPropClasses.has(currentClass)) {\n      // add it as its already included in classnames coming in from newProps\n      finalClassNames.push(currentClass);\n      incomingPropClasses.delete(currentClass);\n    } else if (!oldPropClasses.has(currentClass)) {\n      // add it as it has NOT been removed by user\n      finalClassNames.push(currentClass);\n    }\n  });\n  incomingPropClasses.forEach(s => finalClassNames.push(s));\n  return finalClassNames.join(' ');\n}\n\n/**\n * Checks if an event is supported in the current execution environment.\n * @license Modernizr 3.0.0pre (Custom Build) | MIT\n */\nexport function isCoveredByReact(eventNameSuffix: string, doc: Document = document) {\n  const eventName = 'on' + eventNameSuffix;\n  let isSupported = eventName in doc;\n\n  if (!isSupported) {\n    const element = doc.createElement('div');\n    element.setAttribute(eventName, 'return;');\n    isSupported = typeof (element as any)[eventName] === 'function';\n  }\n\n  return isSupported;\n}\n\nexport function syncEvent(node: Element, eventName: string, newEventHandler: (e: Event) => any) {\n  const eventStore = (node as any).__events || ((node as any).__events = {});\n  const oldEventHandler = eventStore[eventName];\n\n  // Remove old listener so they don't double up.\n  if (oldEventHandler) {\n    node.removeEventListener(eventName, oldEventHandler);\n  }\n\n  if (newEventHandler != null) {\n    // Bind new listener.\n    node.addEventListener(\n      eventName,\n      (eventStore[eventName] = function handler(e: Event) {\n        newEventHandler.call(this, e);\n      }),\n    );\n  }\n}\n\nfunction arrayToMap(arr: string[] | DOMTokenList) {\n  const map = new Map<string, string>();\n  (arr as string[]).forEach((s: string) => map.set(s, s));\n  return map;\n}\n","import React from 'react';\n\nexport const dashToPascalCase = (str: string) =>\n  str\n    .toLowerCase()\n    .split('-')\n    .map(segment => segment.charAt(0).toUpperCase() + segment.slice(1))\n    .join('');\n\nexport interface ReactProps {\n  class?: string;\n}\n\nexport type IonicReactExternalProps<PropType, ElementType> = PropType & React.HTMLAttributes<ElementType> & ReactProps;\n\nexport const createForwardRef = <PropType, ElementType>(\n  ReactComponent: any,\n  displayName: string,\n) => {\n  const forwardRef = (\n    props: IonicReactExternalProps<PropType, ElementType>,\n    ref: React.Ref<ElementType>,\n  ) => {\n    return <ReactComponent {...props} forwardedRef={ref} />;\n  };\n  forwardRef.displayName = displayName;\n\n  return React.forwardRef(forwardRef);\n};\n\nexport * from './attachEventProps';\n","import React from 'react';\nimport ReactDom from 'react-dom';\n\nimport {\n  attachEventProps,\n  createForwardRef,\n  dashToPascalCase,\n  isCoveredByReact,\n} from './utils/index';\n\ninterface IonicReactInternalProps<ElementType> extends React.HTMLAttributes<ElementType> {\n  forwardedRef?: React.Ref<ElementType>;\n  ref?: React.Ref<any>;\n}\n\nexport const createReactComponent = <PropType, ElementType>(tagName: string) => {\n  const displayName = dashToPascalCase(tagName);\n  const ReactComponent = class extends React.Component<IonicReactInternalProps<ElementType>> {\n    constructor(props: IonicReactInternalProps<ElementType>) {\n      super(props);\n    }\n\n    componentDidMount() {\n      this.componentDidUpdate(this.props);\n    }\n\n    componentDidUpdate(prevProps: IonicReactInternalProps<ElementType>) {\n      const node = ReactDom.findDOMNode(this) as HTMLElement;\n      attachEventProps(node, this.props, prevProps);\n    }\n\n    render() {\n      const { children, forwardedRef, style, className, ref, ...cProps } = this.props;\n\n      const propsToPass = Object.keys(cProps).reduce((acc, name) => {\n        if (name.indexOf('on') === 0 && name[2] === name[2].toUpperCase()) {\n          const eventName = name.substring(2).toLowerCase();\n          if (isCoveredByReact(eventName)) {\n            (acc as any)[name] = (cProps as any)[name];\n          }\n        }\n        return acc;\n      }, {});\n\n      const newProps: any = {\n        ...propsToPass,\n        ref: forwardedRef,\n        style,\n        className,\n      };\n\n      return React.createElement(tagName, newProps, children);\n    }\n\n    static get displayName() {\n      return displayName;\n    }\n  };\n  return createForwardRef<PropType, ElementType>(ReactComponent, displayName);\n};\n","/* eslint-disable */\n/* tslint:disable */\n/* auto-generated react proxies */\nimport { createReactComponent } from './react-component-lib';\n\n//@ts-ignore\nimport { JSX } from '@test/ui-core';\n\nimport { defineCustomElements, applyPolyfills } from '@test/ui-core/loader';\n\napplyPolyfills().then(() => defineCustomElements());\nexport const XBox = /*@__PURE__*/createReactComponent<JSX.XBox, HTMLXBoxElement>('x-box');\n","import React, { FC, ComponentType } from 'react';\r\nimport { XBox } from '../stencil/components';\r\nimport { MyClass, MyObject } from '@test/ui-core/dist/tsc';\r\n\r\nexport { MyClass, MyObject};\r\nexport interface BoxProps {\r\n  title: string;\r\n  myObject: MyObject;\r\n  myClassInstance: MyClass;\r\n  Footer: ComponentType;\r\n  onEvent: (props: BoxProps) => void;\r\n}\r\n\r\nexport const Box: FC<BoxProps> = ({\r\n  title,\r\n  myClassInstance,\r\n  myObject,\r\n  Footer,\r\n  onEvent,\r\n}) => {\r\n  return (\r\n    <XBox\r\n      headerTitle={title}\r\n      myClassInstance={myClassInstance}\r\n      myObject={myObject}\r\n      onEvent={ev => onEvent(ev.detail)}\r\n    >\r\n      <span slot=\"body\">I am a web component</span>\r\n      <span slot=\"footer\">\r\n        <Footer />\r\n      </span>\r\n    </XBox>\r\n  );\r\n};\r\n"],"names":["__extends","applyPolyfills","defineCustomElements"],"mappings":"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"}